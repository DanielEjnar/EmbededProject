\section{Architecture and Design}\label{sec:archdesign}

\subsection{Architecture}
\begin{framed}
3. Use your design methodology found in 1. to describe a SysML/UML model of your system in terms of structure and behavior. Make a suggestion for alternative HW/SW architectures. Decide on which parts of the functionality should be mapped to hardware components and software processes.
\end{framed}

The overall structure of the system can be seen in the BDD in figure \ref{fig:bdd}. Here it can be seen, that the system should consist of three parts: \emph{User Interface}, \emph{Generation Generator}, and \emph{Simulator}. Each of the blocks has its own responsibility. 

\emph{User Interface} is responsible for getting the input from and to the user, e.g. the start generation and the final generation and fitness. 

\emph{Generation Generator} is responsible for generating the new generation using the genetic algorithm. \emph{Simulator} is responsible for calculating the fintness, i.e. the Rosenbrock function.

\begin{figure}[htbp]
\begin{centering}
\includegraphics[width=0.7\linewidth]{../diagrams/bdd.png}
\caption{BDD of the system.}
\label{fig:bdd}
\end{centering}
\end{figure}

The internal connections can be seen in the IBD in figure \ref{fig:ibd}. The IBD shows a greater insight into which components are needed. It can be seen that \emph{GenerationGenerator} consists of two different parts, a generator and an interpreter of the random numbers. The point of the interpreter of the random numbers is, that it buffers the numbers such that there is always an amount of random numbers available.

\begin{figure}[htbp]
\begin{centering}
\includegraphics[width=\linewidth]{../diagrams/ibd.png}
\caption{IBD of the system.}
\label{fig:ibd}
\end{centering}
\end{figure}

The behavior of the system can be shown by activity diagram. This can be seen in figure \ref{fig:activity}, where the different elements of the system is described. It shows, that the user starts by setting some parameters and then initializes the initial generation. Then the initial generation is evaluated. If the stopping criterions, which can be set by the user, is met the final generation is saved and then it starts over. If the stopping criterion is not met GenerationGenerator generates a new generation and mutates it, as described in section \ref{sec:theory}.For each generation the fitness is printed out for the user. Then the fitness is evaluated, seen if the stopping criterion is met, and so on until the stopping criterion is met.

\begin{figure}[htbp]
\begin{centering}
\includegraphics[width=0.9\linewidth]{../diagrams/overallActivity.png}
\caption{Activity diagram for the system.}
\label{fig:activity}
\end{centering}
\end{figure}

\subsection{Allocation}
The system has a number of possible allocations. A possible allocation is shown in figure \ref{fig:allocation}, which shows an allocation of both GenerationGenerator and Simulator to hardware. The user interface should not be allocated to hardware.

Other possible allocations are: \begin{itemize} 
\item Both GenerationGenerator and Simulator to software (the ARM processor).
\item GenerationGenerator to hardware (FPGA) and Simulator to software (the ARM processor).
\item GenerationGenerator to software (the ARM processor) and Simulator to hardware (FPGA).
\end{itemize}

As stated earlier it is needed that the 

\begin{figure}[htbp]
\begin{centering}
\includegraphics[width=0.9\linewidth]{../diagrams/allocation.png}
\caption{Allocation diagram of a possible allocation of the system.}
\label{fig:allocation}
\end{centering}
\end{figure}

\subsection{Design}
\footnote{\color{red}NOTE: waits in rosenbrock to reduce resources used}

\begin{framed}
4. Design the software and apply design patterns that are suitable for your project, and motivate the choice of the used patterns. Use the Two-Part Architecture Model if relevant for the problem. Use the abstract OS package for the ZYBO board
\end{framed}